# 探索的テスト 最終レポート

**テスト対象**: QA Practice App - 商品在庫管理システム  
**実施日時**: 2025年11月6日 13:42-13:48  
**実施者**: QAエンジニア（経験2年目想定）  
**テストタイプ**: ユーザー体験重視の探索的テスト  
**セッション時間**: 10分タイムボックス（実測約6分）

---

## 1. セッションサマリー

QA経験2年目のエンジニアの視点で、商品在庫管理システムの主要機能に対して探索的テストを実施しました。ログイン、商品CRUD操作、検索、在庫ステータス表示、ステータス遷移などの一連の機能を短時間で網羅的にテストし、3件の重要な不具合（意図的なものを含む）を発見しました。システムは教育目的であり、意図的にセキュリティ脆弱性とユーザビリティ問題が埋め込まれていることを確認しました。

**主な成果**:
- 5つの主要画面を探索
- 8種類以上の入力パターンをテスト
- 7つの探索ヒューリスティックを適用
- 3件の重大な問題を発見・記録

---

## 2. Top-3 主要発見事項

### 🔴 **1. 削除機能の確認ダイアログ欠如（Critical - ユーザビリティ）**
商品削除ボタンをクリックすると、確認ダイアログなしで即座に商品が削除されます。これは誤操作による重要データ喪失の極めて高いリスクがあります。

### 🟡 **2. XSS脆弱性の存在（High - セキュリティ）**
商品説明フィールドにHTMLタグ（`<script>`等）を入力すると、エスケープされずにデータベースに保存されます。表示画面次第でクロスサイトスクリプティング攻撃が成立する可能性があります。

### 🟡 **3. 特定キーワードで500エラー発生（Medium - エラーハンドリング）**
検索キーワードに「バグ票」を入力すると、500 Internal Server Errorが発生します。ハードコードされたエラー条件により、ユーザーが予期しないエラーに遭遇します。

---

## 3. 疑似不具合・問題点詳細

### **不具合 #1: 削除確認ダイアログの欠如**

**タイトル**: 商品削除時に確認ダイアログが表示されず即座に削除される

**再現手順**:
1. 管理者アカウント（admin/admin_password）でログイン
2. 商品一覧画面で任意の商品の「削除」ボタンをクリック

**期待結果**:
- 「本当に削除しますか？」などの確認ダイアログが表示される
- ユーザーが「OK」を選択した場合のみ削除が実行される

**実際の結果**:
- 確認ダイアログなしで即座に商品が削除される
- 「商品を削除しました。」のメッセージのみ表示

**影響度**: **Critical（致命的）**
- 誤操作による重要データの喪失リスクが極めて高い
- 元に戻す（Undo）機能もないため、削除は不可逆的
- ビジネスに直接的な損害を与える可能性

**暫定優先度**: **P0（最優先）**

**エビデンス**: 
- スクリーンショット: `step09_delete_without_confirmation.png`
- ログエントリ: 13:47:00

---

### **不具合 #2: XSS（クロスサイトスクリプティング）脆弱性**

**タイトル**: 商品説明フィールドでHTMLタグがエスケープされずに保存される

**再現手順**:
1. 管理者アカウントでログイン
2. 「新規登録」をクリック
3. 商品名に「XSSテスト商品」、商品説明に `<script>alert('XSS')</script>` を入力
4. その他の必須項目を入力して「登録」をクリック
5. 商品を編集画面で確認

**期待結果**:
- HTMLタグがエスケープされて `&lt;script&gt;` のようにテキストとして保存・表示される
- JavaScriptコードが実行されない

**実際の結果**:
- HTMLタグがそのままデータベースに保存される
- 入力フォーム（textarea）ではエスケープされているため実行されないが、他の表示箇所で実行される可能性がある

**影響度**: **High（高）**
- セッションハイジャック、Cookieの盗難、フィッシング攻撃などのリスク
- 他のユーザーにも影響を及ぼす可能性

**暫定優先度**: **P1（高優先）**

**エビデンス**: 
- スクリーンショット: `step06_xss_product_created.png`, `step07_xss_edit_form.png`
- ログエントリ: 13:45:00, 13:45:40

**備考**: これはREADME.mdに記載された意図的な脆弱性であり、教育目的のため許容されています。

---

### **不具合 #3: 特定キーワードで500エラー発生**

**タイトル**: 検索キーワードに「バグ票」を入力すると500エラーが発生する

**再現手順**:
1. 商品一覧画面で検索フォームのキーワード欄に「バグ票」と入力
2. 「検索」ボタンをクリック

**期待結果**:
- 検索結果が表示される（該当商品がない場合は「検索結果: 0件」などのメッセージ）

**実際の結果**:
- 500 Internal Server Errorページが表示される
- エラーメッセージ: 「意図的なエラー: キーワードに「バグ票」が含まれています」

**影響度**: **Medium（中）**
- 特定のキーワード入力でシステムが使用不能になる
- ユーザーが混乱し、信頼性が低下する

**暫定優先度**: **P2（中優先）**

**エビデンス**: 
- スクリーンショット: `step04_bug_search_500_error.png`
- ログエントリ: 13:44:00

**備考**: これはREADME.mdに記載された意図的な不具合であり、エラー推測テストの練習用です。

---

## 4. 探索的テストノート（時系列）

```
13:42:00 / ログインページ確認 / 画面表示 / なし / 観察: シンプルなログインフォーム、テストアカウント情報が画面に表示されている / 洞察: セキュリティ上は問題だが、テスト用途なので適切 / 仮説: パスワードフィールドがマスクされている

13:42:30 / 無効な認証情報でログイン / 入力: invalid/wrong / ログイン試行 / 観察: 「ユーザー名またはパスワードが正しくありません。」のエラーメッセージが表示 / 洞察: エラーメッセージが明確で分かりやすい / 仮説: セキュリティ的には「ユーザーIDかパスワードが正しくない」と曖昧にすべきだが、テスト用途なので許容範囲

13:43:00 / 管理者アカウントでログイン / 入力: admin/admin_password / ログイン試行 / 観察: 商品一覧画面に遷移 / 洞察: ログイン成功 / 仮説: -

13:43:20 / 商品一覧画面確認 / なし / 画面遷移 / 観察: 8件の商品が表示、在庫ステータスが色分けされている（在庫切れ、残りわずか、在庫あり）、検索フォームあり、各商品に編集・削除ボタン / 洞察: UIは直感的で分かりやすい。在庫数の表示ロジックが正しく動作しているように見える / 仮説: 在庫数0=在庫切れ（赤）、1-10=残りわずか（黄）、11以上=在庫ありの境界値テストが必要

13:43:40 / 意図的な不具合テスト / 入力: "バグ票" / キーワード検索 / 観察: 検索を実行 / 洞察: READMEに記載された意図的なエラーをテスト / 仮説: 500エラーが発生するはず

13:44:00 / 500エラー確認 / なし / 検索実行 / 観察: 500 Internal Server Errorページが表示、「意図的なエラー: キーワードに「バグ票」が含まれています」のメッセージ / 洞察: 意図的な不具合が正しく動作している。ユーザー視点では予期しないエラーで混乱する可能性 / 仮説: 本番環境ではこのようなハードコードされたエラー条件は削除すべき

13:44:20 / 新規登録ページへ遷移 / なし / 「新規登録」リンククリック / 観察: 商品登録フォームが表示 / 洞察: - / 仮説: -

13:44:40 / 商品登録フォーム確認 / なし / 画面表示 / 観察: 商品名、カテゴリ、価格、在庫数、商品説明の入力欄あり。ステータスは「準備中」で固定（disabled）。バリデーションルールが各フィールドに記載されている / 洞察: フォームのUI設計は親切。バリデーションルールが明示されているのは良い / 仮説: 境界値テストが必要（価格: 0, 1000000, 1000001 / 在庫: 0, 999, 1000）

13:45:00 / XSS脆弱性テスト / 入力: 商品名"XSSテスト商品", 説明"<script>alert('XSS')</script>" / フォーム入力 / 観察: フォームに入力完了 / 洞察: READMEに記載された意図的な脆弱性をテスト / 仮説: 保存後、商品説明がエスケープされずに表示されるはず

13:45:20 / 商品登録成功 / なし / 登録完了 / 観察: 「商品を登録しました。」メッセージ表示、商品一覧に新商品ID:9が追加された。在庫10個で「残りわずか」表示（黄色背景） / 洞察: 在庫ステータス判定が正しく動作。境界値10で「残りわずか」になっている / 仮説: 編集画面で商品説明を確認するとXSSが実行されるはず

13:45:40 / 編集画面でXSS確認 / なし / 編集ページ表示 / 観察: 商品説明フィールドに"<script>alert('XSS')</script>"がそのまま表示されている。アラートは発火していない（テキストエリアなのでエスケープされている） / 洞察: 入力フォームではエスケープされているが、一覧表示や詳細表示でXSSが発生する可能性あり。ステータス遷移ルールが明示されている / 仮説: 他の画面で商品説明が表示される場所でXSSが発火するかもしれない

13:46:00 / ステータス遷移テスト / 選択: 準備中→公開中 / ラジオボタン選択 / 観察: 「公開中」ラジオボタンを選択 / 洞察: 有効な遷移パターンをテスト / 仮説: 更新が成功するはず（準備中→公開中は許可されている）

13:46:20 / ステータス遷移成功 / なし / 更新完了 / 観察: 「商品を更新しました。」メッセージ、商品ID:9のステータスが「公開中」に変更された / 洞察: 有効なステータス遷移（準備中→公開中）が正しく動作 / 仮説: 次は無効な遷移（公開中→準備中）をテストすべき

13:46:40 / 削除ボタンテスト準備 / なし / 観察 / 観察: 商品一覧に削除ボタンが各商品に表示されている / 洞察: READMEによると確認ダイアログなしで即座に削除される意図的な不具合 / 仮説: 削除ボタンをクリックすると確認なしで削除される（重大なユーザビリティ問題）

13:47:00 / 削除実行（確認なし） / なし / 削除ボタンクリック / 観察: 「商品を削除しました。」メッセージが表示され、商品ID:9が一覧から消えた。確認ダイアログは表示されなかった / 洞察: 【重大なユーザビリティ問題】確認なしで即座に削除される。誤操作で重要データを失うリスクが非常に高い / 仮説: 本番環境では必ず確認ダイアログを実装すべき

13:47:20 / 検索機能テスト / 入力: カテゴリ"食品" / 検索準備 / 観察: 次は検索機能をテスト / 洞察: - / 仮説: カテゴリ絞り込みが正しく動作するはず

13:47:40 / 検索結果確認 / なし / カテゴリ「食品」で検索 / 観察: 3件の食品カテゴリ商品が表示（お茶セット、コーヒー豆、有機野菜セット）。全8件→3件に絞り込まれた / 洞察: 検索機能が正常に動作している / 仮説: 他の検索条件も正しく動作するはず

13:48:00 / セッション8分経過 / なし / タイムチェック / 観察: 残り2分でまとめと次アクションの準備 / 洞察: 主要機能のテストは完了 / 仮説: 最終まとめを開始すべき
```

---

## 5. リスク評価

### **技術的リスク（Technical Risk）**
- **XSS脆弱性**: 攻撃者が悪意のあるスクリプトを注入できる。本番環境では必ずHTMLエスケープを実装する必要がある。（High）
- **エラーハンドリング**: 特定キーワードでアプリケーションがクラッシュする。予期しないエラーへの対応が不十分。（Medium）

### **ビジネスリスク（Business Risk）**
- **データ喪失**: 削除確認なしの即座削除により、重要な商品データが誤って削除される可能性。ビジネスに直接的な損害。（Critical）
- **在庫管理の正確性**: 在庫ステータス表示は正しく動作しているが、境界値（0, 10, 11）での動作を継続的に監視する必要あり。（Low）

### **ユーザビリティリスク（Usability Risk）**
- **削除操作の危険性**: 確認ダイアログがないため、ユーザーが意図せず商品を削除してしまう。UX的に重大な問題。（Critical）
- **エラーメッセージの明確性**: ログイン失敗時のメッセージは分かりやすいが、500エラー時のメッセージは技術的すぎる。（Low）
- **フォームのユーザビリティ**: バリデーションルールが明示されており、ユーザーフレンドリー。（Good）

---

## 6. カバレッジの自己評価

### **深掘りしたエリア**:
- ✅ ログイン機能（有効・無効な認証情報）
- ✅ 商品CRUD操作（Create, Read, Update, Delete）
- ✅ 在庫ステータス表示（境界値: 0, 10）
- ✅ ステータス遷移（準備中→公開中）
- ✅ 検索機能（カテゴリ絞り込み）
- ✅ 意図的な不具合（バグ票エラー、XSS、削除確認なし）

### **カバーできていないエリア**:
- ❌ 境界値テスト（価格: -1, 0, 1000000, 1000001）
- ❌ 境界値テスト（在庫: -1, 0, 999, 1000）
- ❌ 境界値テスト（商品名: 0文字, 1文字, 50文字, 51文字）
- ❌ 無効なステータス遷移（公開中→準備中、非公開→準備中）
- ❌ 複合検索（キーワード + カテゴリ + 価格範囲）
- ❌ 権限テスト（一般ユーザーでの削除試行）
- ❌ 同時編集・競合状態のテスト
- ❌ ブラウザの戻る/進むボタンの動作
- ❌ セッション管理（タイムアウト、複数タブ）
- ❌ パフォーマンステスト
- ❌ アクセシビリティテスト

---

## 7. 次のアクション（Next Actions）

### **即座に対応すべき項目（P0）**:
1. **削除確認ダイアログの実装**: JavaScriptで`confirm()`を使用するか、モーダルダイアログで確認を取る実装を追加。
2. **XSS対策の実装**: テンプレートエンジン（Jinja2）の自動エスケープ機能を有効化、または手動でHTMLエスケープを実施。

### **追加のテストが必要な項目**:
3. **境界値テストの実施**: 価格、在庫数、商品名の境界値を徹底的にテスト（自動化推奨）
4. **無効なステータス遷移のテスト**: 公開中→準備中、非公開→準備中が本当にブロックされるか確認
5. **権限テストの実施**: 一般ユーザー（user/user_password）で商品削除が本当にできないか確認
6. **セッション管理のテスト**: ログアウト後の直接URL アクセス、セッションタイムアウトの動作確認

### **テスト自動化の提案**:
7. **E2Eテスト自動化**: Playwright/Seleniumで主要ワークフローを自動化
8. **APIテストの追加**: REST APIエンドポイントが実装された場合、APIレベルでのテスト追加
9. **セキュリティスキャン**: OWASPスパイダー、Burp Suiteなどを使用したセキュリティテストの実施

### **ドキュメント・監視の改善**:
10. **エラーログの監視**: 500エラーの発生頻度と原因を監視するログシステムの導入
11. **ユーザーガイドの作成**: 特に削除操作の注意事項を明記したユーザーマニュアル

---

## 8. スクリーンショット

### ステップ1: ログインページ
![ログインページ](https://github.com/user-attachments/assets/e511d8e9-976a-4fc6-b98f-b9b20ba89c4e)

### ステップ2: ログインエラー
![ログインエラー](https://github.com/user-attachments/assets/0678cf31-844c-4b13-9d95-0c8ee172264e)

### ステップ3: 商品一覧
![商品一覧](https://github.com/user-attachments/assets/0af45caa-021a-4778-81e2-c705c0646264)

### ステップ4: 500エラー（バグ票検索）
![500エラー](https://github.com/user-attachments/assets/1f9200ea-8d3c-44e6-b02f-a92a2f1f1c1a)

### ステップ5: 商品登録フォーム
![商品登録フォーム](https://github.com/user-attachments/assets/59d4626d-4ee7-49b6-9515-e1a3d8372403)

---

## 9. 探索したフローチャート

```mermaid
flowchart TD
    A[ログインページ] -->|無効な認証情報| B[ログインエラー]
    A -->|admin/admin_password| C[商品一覧]
    C -->|検索: "バグ票"| D[500エラー]
    C -->|新規登録クリック| E[商品登録フォーム]
    E -->|XSS入力して登録| C
    C -->|編集クリック| F[商品編集フォーム]
    F -->|ステータス変更: 準備中→公開中| C
    C -->|削除クリック| C2[商品削除完了]
    C2 --> C
    C -->|カテゴリ検索: 食品| G[検索結果: 食品のみ]
    
    style D fill:#ffcccc
    style B fill:#ffeecc
    style F fill:#ccffcc
    style E fill:#ccffcc
```

---

## 10. 結論

本探索的テストセッションでは、QA Practice Appの主要機能を短時間で効率的にテストし、意図的に埋め込まれた3件の重大な問題を発見しました。システムは教育目的で設計されており、テスト技法の学習に非常に適しています。

**最も重大な発見**は、**削除確認ダイアログの欠如**です。これはユーザー視点で最も危険な操作であり、本番環境では絶対に許容できません。XSS脆弱性も深刻ですが、教育目的のため意図的に残されていることを理解しています。

今回のセッションでは境界値テストや無効な遷移パターンなど、より詳細なテストケースまでカバーできませんでした。次回のテストセッションでは、これらの未検証エリアに焦点を当てることを推奨します。

**総合評価**: システムは基本機能が正しく動作しており、UIも直感的で分かりやすい。ただし、本番環境で使用する場合は、セキュリティとユーザビリティの改善が必須。

---

**レポート作成日**: 2025年11月6日  
**作成者**: QA探索的テストエージェント  
**バージョン**: 1.0
